@import "prosemirror-view/style/prosemirror.css";

.ProseMirror {
  @apply relative min-h-20 px-8 py-6 focus:outline-none;

  &.drag-over {
    @apply border-2 border-dashed border-blue-500 bg-blue-500/5;
  }

  a {
    @apply text-zinc-200 underline;
  }

  h1 {
    @apply text-2xl font-medium mb-3;

    strong {
      @apply text-2xl;
    }
  }

  h3 {
    @apply text-lg font-medium mb-3;

    strong {
      @apply text-lg;
    }
  }

  h2 {
    @apply text-xl font-medium mb-3;

    strong {
      @apply text-xl;
    }
  }

  h4 {
    @apply text-base font-medium mb-3;

    strong {
      @apply text-base;
    }
  }

  h5 {
    @apply text-sm font-medium mb-3;

    strong {
      @apply text-sm;
    }
  }

  h6 {
    @apply text-xs font-medium mb-3;

    strong {
      @apply text-xs;
    }
  }

  * {
    &::selection {
      @apply bg-[#264f78];
    }
  }

  [data-placeholder] {
    @apply relative;
  }

  [data-placeholder]::before {
    @apply pointer-events-none absolute top-0 left-0 w-full h-full flex items-center select-none text-zinc-400 text-sm font-normal content-[attr(data-placeholder)];
  }

  p,
  strong {
    @apply text-sm text-zinc-200 leading-relaxed mb-3;
  }

  li {
    @apply text-zinc-200;
  }

  ul {
    li {
      @apply ml-5  list-outside list-disc;

      .todo__list {
        @apply ml-2;

        .todo__list__item {
          @apply list-none;

          &::before {
            @apply hidden;
          }
        }
      }
    }
  }

  ol {
    @apply ml-8 list-none;
    counter-reset: level-0;

    &:not(:first-child) {
      counter-reset: level-0;
    }

    li {
      & > * {
        @apply mb-1.5;
      }
    }

    > li {
      @apply relative list-none;
      counter-increment: level-0;

      &::before {
        @apply absolute -left-7 top-0 w-6 text-left font-medium leading-[24px] text-zinc-400;
        content: counter(level-0) ".";
      }

      .todo__list {
        @apply ml-2;

        .todo__list__item {
          @apply list-none;

          &::before {
            @apply hidden;
          }
        }
      }

      ol {
        @apply ml-2;
        counter-reset: level-1;

        > li {
          @apply relative pl-5;
          counter-increment: level-1;

          &::before {
            @apply absolute left-0 top-0 w-6 text-left font-medium leading-[20px] text-zinc-400;
            content: counter(level-1, lower-alpha) ".";
          }

          .todo__list {
            @apply ml-2;

            .todo__list__item {
              @apply list-none;

              &::before {
                @apply hidden;
              }
            }
          }

          ol {
            counter-reset: level-2;

            > li {
              @apply relative mt-1.5 pl-5;
              counter-increment: level-2;

              &::before {
                @apply absolute left-0 top-0 w-6 text-left font-medium leading-[20px] text-zinc-400;
                content: counter(level-2, lower-roman) ".";
              }

              .todo__list {
                @apply ml-2 mt-3;

                .todo__list__item {
                  @apply list-none;

                  &::before {
                    @apply hidden;
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  // Todo list styling
  .todo__list {
    @apply list-none;

    .todo__list__item {
      @apply relative ml-0  flex items-start gap-2;

      .todo__checkbox__wrapper {
        @apply relative flex items-center justify-center;
      }

      .todo__checkbox__input {
        @apply hidden;
      }

      .todo__checkbox {
        @apply mt-0.5 h-4 w-4 cursor-pointer rounded border border-zinc-400/10 bg-transparent text-zinc-400 transition-all duration-200;
        @apply focus:ring-2 focus:ring-zinc-500 focus:ring-offset-0;
        @apply flex items-center justify-center;

        &--checked {
          @apply border-zinc-500 bg-zinc-500 text-white;

          &::after {
            @apply font-icon text-xs font-bold content-['\f00c'];
          }
        }
      }

      .todo__content {
        @apply flex-1 cursor-text;

        & > * {
          @apply mb-1.5;
        }
      }

      .todo__list {
        @apply ml-2;

        .todo__list__item {
          @apply ml-0;
        }
      }
    }
  }

  code {
    @apply rounded bg-zinc-800 px-1 py-px text-zinc-200;
  }
}

//Link hover card
.prosemirror__link__card {
  @apply absolute hidden;

  &__content {
    @apply flex w-max items-center gap-1 rounded-md border border-zinc-400/10 bg-zinc-900 px-1 py-0.5 text-sm text-zinc-400;
  }

  &__edit__button {
    @apply w-max cursor-pointer rounded border-none bg-transparent p-1 px-2 text-left text-sm text-zinc-200 transition-colors hover:bg-zinc-800;
  }

  &__form {
    @apply w-full;
  }

  &__separator {
    @apply mx-1 my-1 h-5 w-px bg-zinc-400/10;
  }

  &__actions {
    @apply flex items-center gap-1;
  }

  &__unlink,
  &__newtab {
    @apply flex-1 cursor-pointer rounded border-none bg-transparent p-1 px-1.5 text-center text-sm text-zinc-200 transition-colors hover:bg-zinc-800;
  }

  &__icon_separator {
    @apply mx-0.5 h-5 w-px bg-zinc-400/10;
  }

  &__edit {
    @apply block;
  }

  &__edit__form {
    @apply w-full min-w-[20rem];
  }

  &__input {
    @apply mb-2 w-full rounded border border-zinc-400/10 bg-zinc-900 p-2 text-sm text-zinc-200 focus:border-zinc-500 focus:outline-none;
  }

  &__input__label {
    @apply mb-1 block text-xs text-zinc-400;
  }

  &__input__group {
    @apply mb-3;
  }

  &__button__group {
    @apply my-2 flex gap-2;
  }

  &__update {
    @apply flex-1 rounded bg-zinc-600 px-3 py-1 text-sm font-medium text-white transition-colors hover:bg-zinc-500;
  }

  &__cancel {
    @apply flex-1 rounded border border-zinc-400/10 bg-transparent px-3 py-1 text-sm font-medium text-zinc-200 transition-colors hover:bg-zinc-800;
  }
}

.hub__editor__divider__wrapper {
  @apply flex min-h-2.5 w-full items-center;
}

.hub__editor__divider {
  @apply my-5 h-px w-full border-none bg-zinc-400/10;
}

.hub__editor__blockquote {
  @apply py-3 pl-4 italic text-zinc-300 relative;

  &::before {
    @apply absolute left-0 top-0 h-full w-1 bg-zinc-400/30 rounded-full;
    content: "";
  }

  p {
    @apply m-0;
  }
}

.mention {
  @apply inline whitespace-nowrap rounded-full bg-indigo-700 px-1.5 py-0.5 text-xs font-medium text-zinc-200;

  &::before {
    @apply text-zinc-200;
  }
}

.mention__suggestions {
  @apply fixed rounded-lg border border-zinc-400/10 bg-zinc-900;
  @apply max-h-[15rem] overflow-y-auto md:min-w-[22rem];
}

.mention__suggestion {
  @apply flex cursor-pointer items-center gap-3 px-3 py-[5px] transition-colors duration-150 ease-in-out;

  &__active {
    @apply bg-zinc-800;
  }
}

.mention__suggestion__avatar {
  @apply flex-shrink-0;

  img {
    @apply h-6 w-6 rounded-md object-cover;
  }
}

.mention__suggestion__info {
  @apply min-w-0 flex-1;
}

.mention__suggestion__name {
  @apply truncate text-xs text-zinc-400;
}

// Code block styling
.cm-editor {
  @apply overflow-hidden rounded-md bg-zinc-900 font-mono text-sm;

  .cm-content {
    @apply whitespace-pre-wrap break-words p-3;
  }

  .cm-line {
    @apply leading-relaxed;
  }

  .cm-lineWrapping {
    @apply whitespace-pre-wrap break-all;
  }

  .cm-cursor {
    @apply border-l-2 border-zinc-500;
  }

  .cm-selectionBackground,
  .cm-selection,
  .cm-focused .cm-selection {
    @apply bg-[#1e3a8a] !important;
  }

  .cm-selectionBackground,
  .cm-selection,
  .cm-focused .cm-selection {
    @apply bg-[#264f78] !important;
  }

  &.cm-focused {
    @apply outline-none;
  }

  .cm-activeLine {
    @apply bg-zinc-500 bg-opacity-5;
  }

  .cm-cursor-primary {
    @apply border-l-2 border-zinc-500;
  }

  .cm-selectionBackground + .cm-line {
    @apply text-zinc-400;
  }

  .cm-cursor,
  .cm-cursor-primary,
  .cm-cursor-secondary {
    @apply border-l-2 border-zinc-500;
  }

  .cm-focused .cm-cursor {
    @apply border-l-2 border-zinc-500;
    animation: blink 1s infinite;
  }

  @keyframes blink {
    0%,
    50% {
      border-left-color: white;
    }
    51%,
    100% {
      border-left-color: transparent;
    }
  }
}
.pm-codeblock {
  @apply relative rounded-md border border-zinc-400/10 bg-zinc-900 mb-3;

  .cm-editor {
    @apply w-full;

    * {
      @apply font-mono text-xs;
    }

    .cm-scroller {
      @apply overflow-x-hidden;
    }

    &.cm-focused {
      & + * {
        @apply block;
      }
    }
  }
}

.codeblock-toolbar {
  @apply flex items-center justify-between rounded-t-md bg-zinc-900 px-2 py-0;

  .codeblock-tools-container {
    @apply flex w-full items-center justify-between gap-2;

    .language-selector {
      @apply relative;

      .language-select {
        @apply flex cursor-pointer items-center justify-between rounded bg-transparent px-2 py-1 text-xs text-zinc-200;

        .current-language {
          @apply pr-1 text-zinc-400;
        }

        .fa-chevron-down {
          @apply text-xs text-zinc-400;
        }
      }

      .language-dropdown {
        @apply absolute z-[999] mt-1.5 max-h-[10rem] w-full min-w-[8rem] overflow-y-auto rounded border border-zinc-400/10 bg-zinc-900 shadow-lg;

        &::-webkit-scrollbar {
          @apply h-2 w-1;
        }

        &::-webkit-scrollbar-thumb {
          @apply rounded-md bg-zinc-600;
        }

        &::-webkit-scrollbar-track {
          @apply rounded-md bg-zinc-800;
        }

        .language-option {
          @apply cursor-pointer bg-zinc-900 px-3 py-1 text-xs text-zinc-200 transition-colors hover:bg-zinc-800;

          &:first-child {
            @apply rounded-t;
          }

          &:last-child {
            @apply rounded-b;
          }
        }
      }
    }

    .tooltip-actions {
      @apply flex gap-0;

      button {
        @apply cursor-pointer rounded border-none bg-transparent p-1.5 text-center text-xs text-zinc-400 transition-colors hover:text-zinc-200;
      }
    }
  }
}

.cm-scroller {
  &::-webkit-scrollbar {
    @apply h-2 w-1;
  }

  &::-webkit-scrollbar-thumb {
    @apply rounded-md bg-zinc-600;
  }

  &::-webkit-scrollbar-track {
    @apply rounded-md bg-zinc-800;
  }
}

.sr-only {
  @apply absolute m-[-1px] h-px w-px overflow-hidden whitespace-nowrap border-0 p-0;
  clip: rect(0, 0, 0, 0);
}

@import "./plugins/slash/slash.plugin.scss";
@import "./plugins/media/media.scss";
